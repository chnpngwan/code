# 数据库

数据库名称:  music_video



# 表汇总

> 表的设计模块
>
> - 实体元数据
>   - ID，创建时间等信息
> - 实体数据
>   - 用户名，密码，昵称之类的代表实体数据的信息
> - 权限/状态信息
>   - 逻辑删除，角色判断，审核状态等信息

## 用户表

## 管理员表

## 视频表



## 评论表

## 历史记录表

## 收藏表

## 收藏夹

## 合集表

# 用户表 user_t

```json
{
    "id":0, // 用户ID
    "create_time":"date", // 注册时间
    
    "username":"string", // 用户名
    "password":"string", // 密码 MD5加密
    "nickname":"string", // 昵称
    "description":"string", // 个人简介
    "gender":"string", // 性别
    "age":0, // 年龄出生年月
    "brithday":"date", // 
    "avatar":"string", // 头像URL
    "works":0, // 发布的作品数
    "collections":0, // 发布的合集/课程数量
    
    "baned":0|1, // 是否封禁
    "teacher":0|1, // 是否为老师
    "delete":0|1, // 逻辑删除
}
```

# 认证表 auth_teacher_t

```json
{
    "id":0, // 认证ID
    "create_time":"date",
    "uid":0, // 认证用户
    "status":0|1|2, // 认证状态
    "admin_id":0, // 认证人
}
```





# 管理员表 admin_t

```json
{
    "aid":0, // 管理员ID
    "create_time":"date", // 注册时间
    "username":"string", // 用户名
    "password":"string", // 密码 MD5加密
    "delete":0|1, // 逻辑删除
}
```

# 视频表 video_t

```json
{
    "id":0, // ID long
    "create_time":"date", // 发布时间
    "creator":0, // 发布人ID
    
    "title":"string", // 视频标题
    "description":"text", // 视频简介
    "cover":"string", // 封面URL
    "duration":0, // 时长 long
    "video":"string", // 视频文件位置
    // tag 功能使用mongodb实现
    
    "play_count":0, // 播放量 long 使用大数据工具计算
    "collect_count":0, // 收藏量  long  使用大数据具工具计算
    
    "open":0|1, // 是否公开展示
    "class_id":0, // 所属课程ID
    
    "baned":0|1, // 是否封禁
    "check_status":0|1|2, // 审核状态
    "check_admin_id":0, // 审核的管理员ID
    "show":0|1, // 是否隐藏
}
```

# 视频审核表 check_video_t

```json
{
    "id":0, // 认证ID
    "create_time":"date", // 申请认证时间
    "vid":0, // 认证视频
    "status":0|1|2, // 认证状态
    "admin_id":0, // 认证人
}
```





# 评论表

> 使用mongodb存储评论

```json
{
    "id":0, // 评论ID long？
    "create_time":"date", // 发布时间
    
    "send_id":0, // 发布人
    "recive_id":0, // 回复评论 若为0则为根评论 否则为二级评论。无三级评论
    "text":"text", // 评论内容
    
    "baned":0|1, // 是否封禁
}
```

# 历史记录表

> 考虑是否使用redis全权管理

```json
{
    "id":0, // 历史记录
    "create_time":"date", // 播放时间
    "vid":0, // 视频ID
    "uid":0, // 用户ID
    "progress":0, // 视频进度 long
}
```

# 收藏表

> 考虑交给mongodb存储

```json
{
    "id":0, // 历史记录
    "create_time":"date", // 收藏时间
    "vid":0, // 视频ID
    "uid":0, // 用户ID
    "favorites":0, // 收藏夹ID
}
```

# 收藏夹

```json
{
    "id":0, // 收藏夹ID
    "create_time":"date", // 创建时间
    "uid":0, // 用户ID
    "title":"string" , // 收藏夹标题
    "video_count":0, // 收藏夹收藏视频数量 1000上限
    "delete":0|1, // 逻辑删除
}
```

# 合集-视频表

> 考虑交给mongodb存储

```json
{
    "id":0, // ID
    "cid":0, // 合集ID
    "vid":0, // 视频ID
}
```



# 合集表

```json
{
    "id":0, // 合集ID
    "create_time":"date", // 创建时间
    "uid":0, // 创建人ID
    "title","string", // 合集标题
    "video_count":0, // 合集中视频数 1000上限
    "delete":0|1, // 逻辑删除
}
```

