<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    // JS强大的表现力 语言精粹 对象
    // 对象字面量
    // 数据类型： 1.简单 2.复杂（引用）

    // 送花 
    const Biang = {
      name: '黄斌',  // key value
      age: 21,
      hometown: '江西宜春',
      isSingle: true,
      sendflower: function () {

      }
    }

    // 什么是对象 = 属性 + 方法
    // 现实世界很复杂，面向对象要能搞得定设计模式
    const XGuan = {
      name: '小管',
      age: 20,
      height: '185cm',
      hometown: '江西宜春',
      isSingle: true,
      money: '+∞',
      hobby: '摄影',
      sendFlowers: function (receiver) {
        receiver.receiveFlower(this);
      }
      // 上述sendFlowers可以简写为
      //sendFlowers(){
      //    ....
      //}
    }

    const XM = {
      name: '小美',
      age: 19,
      hometown: '江西南昌',
      emotion: 60, //假设此时小美心情是60
      isSingle: true,
      hobby: '舞蹈',
      receiveFlowers(sender) {
        console.log(`${this.name}收到${sender.name}的花`);
        // es6
        // es6 代码更优雅
        // 字符串模版
        // console.log(`${this.name}收到${sender.name}的花`)

        // es5
        // 命令式代码太low 了
        // console.log(this.name + '收到' + sender.name + '送的花');
        if (this.emotion < 80) {
          console.log('老娘没心情，要他滚蛋')
        } else {
          console.log('万达走一波')
        }
      }
    }

    // 代理模式
    const XH = {
      name: '小红',
      hometown: '江西南昌',

      // 小红类似Java中所讲的接口 Interface ，小管通过小红来达到实现送花功能
      // 所以小红也得先收花，在送花，两个方法她都得有
      receiveFlower(sender) {
        // console.log('收到' +sender.name+'送的花');
        if (XM.emotion >= 80) {
          XM.receiveFlowers(sender);
        } else {
          setTimeout(function () {
            XM.receiveFlowers(sender);
            XM.emotion = XM.emotion + 10;
            console.log(`此时小美的心情:${XM.emotion}`);
            console.log('2s后再送一次');
          }, 2000) // 这里假设每过2000ms送一次花。
        }
      }
    }
  </script>

</body>

</html>