<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<link href="../css/showMsg.css" type="text/css" rel="stylesheet"/>
		<script src="../js/showMsg.js" type="text/javascript" charset="utf-8"></script>
		<style type="text/css">
			* {
			    margin: 0;
			    padding: 0;
			}
			#course{
				height:810px;
			}
	
			div {
			    display: block;
			}
			.inlineBlock {
				display: inline-block;
			}
			.course-list {
			    font-size: 0;
			    padding: 30px 30px 0;
			    overflow: hidden;
			    width: 100%;
			}
			.course-list .course-cover {
			    width: 240px;
			    height: 130px;
			    border-radius: 8px;
			    position: relative;
			    margin-bottom: 12px;
			}
			.course-list>li {
				list-style:none;
			    float: left;
			    position: relative;
			    width: 230px;
			    height: 280px;
			    font-size: 12px;
			    box-sizing: border-box;
			    vertical-align: top;
			    color: #a8a8b3;
			    overflow: visible;
			    cursor: pointer;
			    margin-right: 30px;
			    margin-bottom: 0;
			}
			.course-list .course-info .margint10 {
			    margin-top: 10px;
			}
			.course-list>li h3 {
				color: #59657d;
			    width: 100%;
			    position: relative;
			    font-size: 16px;
			    font-weight: bold;
			    cursor: pointer;
			}
			.course-list .course-info p {
				line-height: 17px;
				margin-top: 8px;
				font-size: 12px;
			}
			.overHidden1 {
				overflow: hidden;
				text-overflow: ellipsis;
				white-space: nowrap;
			}
			.line2 {
				overflow: hidden;
				text-overflow: ellipsis;
				display: -webkit-box;
				-webkit-line-clamp: 1;
				-webkit-box-orient: vertical;
			}
			.color1 {
			    color: #131B26;
			}
			.color2 {
				color: #474C59;
			}
			.color3 {
				color: #8A8B99;
			}
			.course-list .course-cover>img, .course-list .course-cover>a, .course-list .course-cover>a img {
				display: inline-block;
				width: 100%;
				height: 100%;
				border-radius: 8px;
			}
			
			/*新增分页样式*/
			#pagination {
				margin-top: 20px;
				text-align: center;
			}
			.pagination a{
				padding: 4px 8px;
				margin: 4px;
				border: 1px solid #aaaadd;
				text-decoration: none;
				color: #006699;
				display :inline-block;
			}
			
			.pagination a: hover {
				border-color:#FF0000;
				color: #000;
			}
			.pagination .current {
				font-weight: bold;
				background-color: #E54915;
				color: #FFF;
			}
			.search_div {
				height: 40px;
				padding: 2px;
				position: relative;
				top: 10px;
				left: 30px;
			}
			
			.search-btn {
				width: 80px;
				height: 40px;
				border: none;
			}
			
			.search-btn:hover{
				background-color: #D6170D;
			}
			
			.search-ipt {
				height: 40px;
				padding-left: 2px;
				border: none;
				font-size: 14px;
			}
			.search-lab{
				height: 40px;
				padding-left: 2px;
				border: none;
				font-size: 14px;
			}
			.course-tab {
			    height: 60px;
			    box-shadow: 0px -1px 0px 0px #f2f2f2 inset;
			    padding: 0 30px;
			    font-size: 0;
			}
			.course-tab .tab-item.current {
			    position: relative;
			    font-weight: 500;
			    color: #181e33;
			}
			.course-tab .tab-item {
			    cursor: pointer;
			    display: inline-block;
			    position: relative;
			    margin-right: 30px;
			    padding: 0 24px;
			    text-align: center;
			    line-height: 60px;
			    font-size: 16px;
			    color: #646873;
			}
			.course-tab .tab-item.current::after {
			    position: absolute;
			    bottom: 0;
			    left: 50%;
			    -webkit-transform: translateX(-50%);
			    -moz-transform: translateX(-50%);
			    -ms-transform: translateX(-50%);
			    -o-transform: translateX(-50%);
			    transform: translateX(-50%);
			    content: " ";
			    width: 34px;
			    height: 4px;
			    background: #3b90ff;
			    border-radius: 2px;
			}
			.course-list .course-cover .hanlde-list {
			    position: absolute;
			    display: none;
			    top: 0;
			    right: 0;
			    background: rgba(255,255,255,0.9);
			    border-radius: 0 8px 0 8px;
			    padding: 7px 6px;
			    box-sizing: border-box;
			    z-index: 10;
			}
			.course-list .course-cover .hanlde-list>li:last-child {
			    border-right: 0;
			    margin-right: 0;
			}
			.course-list .course-cover .hanlde-list>li {
			    display: inline-block;
			    padding: 0 10px;
			    border-right: 1px solid #e1e1e5;
			    cursor: pointer;
			    font-size: 12px;
			    color: #3a8bff;
			    margin-right: 0;
			    box-sizing: border-box;
			}
			.course:hover .hanlde-list{ 
			    display: block; 
			}
			.course:hover .course-cover{
				-moz-box-shadow: 2px 2px 10px #909090;
				-webkit-box-shadow: 2px 2px 10px #909090;
				box-shadow:2px 2px 10px #909090;
			}
			.course:hover .inlineBlock{
				color: #007DDB;
			}
			
		</style>
	</head>
	
	<body>
		<div id="course">
			<div class="course-tab">
				<a href="class_stu.html"><div class="tab-item" id="myLearn">我学的课</div></a>
				<div class="tab-item current" id="FindAll">所有课程</div>
			</div>
			<div class="search_div">
				<label class="search-lab">班级名称：</label>
				<input type="search" class="search-ipt" placeholder="请输入要搜索的课程"  id="search-name" />
				<input type="button" class="search-btn" @click="search" value="搜素"/>  
			</div>
			<ul class="course-list" id="courselist">
				<li class="course clearfix" v-for="classe in classes">
					<div class="course-cover">
						<a href="javascript:void(0);" class="hot_warp">
							<img :src="classe.image" :title="classe.name"/>
						</a>
						<ul class="hanlde-list">
							<li class="quit-course quitCourseBtn" @click="add(classe.id)">添加课程</li>
						</ul>
					</div>
					<div class="course-info">
						<h3 class="inlineBlock">{{classe.name}}</h3>
						<p class="line2 color3">{{classe.t_name}}</p>
						<p>{{classe.starttime}} - {{classe.endtime}}</p>
						<p class="overHidden1">{{classe.c_name}}</p>
					</div>
				</li>
			</ul>
			<div class="pagination" id="pagination"></div>
		</div>
		<script src="../js/vue.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/jquery-2.1.4.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/showpage.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/qs.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/axios.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			let page = 1;
			let rows = 10;
			let vm = new Vue({
			
				el:"#course",
				data:{
					classes:[],
					totalPage: "",
				},
				mounted(){
					axios.post("stu/findAll", qs.stringify({page, rows})).then(result=>{
						if(result.status == 200 && result.data.code == 200){
							this.classes = result.data.data.rows;
							this.totalPage = Math.ceil( result.data.data.total / rows);
							$("#pagination").showPage(this.totalPage);
						}
					})
				},
				methods:{
					search(){
						page = 1;
						let name = $.trim($("#search-name").val());
						axios.post("stu/findAll", qs.stringify({page, rows, name})).then(result=>{
							if(result.status == 200 && result.data.code == 200){
								this.classes = result.data.data.rows; 
								this.totaPage = Math.ceil(result.data.data.total / rows)
								$("#pagination").showPage(this.totalPage);
							}
						})
					},
					add(id){
						axios.post("stu/add", qs.stringify({id, id})).then(result=>{
							if(result.status == 200 && result.data.code == 200){
								showMsg("添加成功!!!","green");
								location.reload();
							}else{
								showMsg("添加失败!!!","red");
							}
						})
					}
				}
			})
			function findByPage(index, obj){
				page = index;
				let name = $.trim($("#search_name").val());
				axios.post("stu/findAlls", qs.stringify({page, rows, name})).then(result=>{
					if(result.status == 200 && result.data.code == 200){
						vm.$data.classes = result.data.data;
					}
				})
			}
			
		</script>
	</body>
</html>
