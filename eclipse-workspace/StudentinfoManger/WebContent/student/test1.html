<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			.nav{
				float: left;
				width: 200px;
				height: 650px;
				background-color: skyblue;
				position: relative;
			}
			.nav ul{
				width: 200px;
				height: 650px;
				background-color: white;
				position: absolute;
				right: 0px;
				overflow-y:scroll;
			}
			.nav ul li{
				list-style-type:none;
				height: 40px;
				text-align: center;
			}
			.nav ul li a:hover{
				color: #FB654A !important;
			}
			.nav ul li a{
				font-size: large;
				width: 100%;
				height: 100%;
				text-decoration: none;
				color: #999999;
			}
			
			.right{
				float: left;
				width: 1280px;
				height: 650px;
				overflow-y:scroll;
			}
			.right h5{
				margin-left: 300px;
			}
			.right label,.answers{
				margin-left: 250px;
			}
			.clearfix::after {
				content: "";
				height: 0;
				display: block;
				visibility: hidden;
				clear: both;
			}
			.clearfix{
				zoom: 1;
			}
			.title h2{
				float: left;
				margin: 30px 0 0 550px;
			}
			.title h3{
				float: left;
				margin: 35px 0 0 100px;
			}
		</style>
	</head>
	<body>
		<div class="">
			<div class="header">
				
			</div>
			
			<div class="nav">
				<ul>
				</ul>
			</div>
			
			<div class="right" id="right">
				<div class="title clearfix">
					<h2 id = "ename"></h2>
				</div>
				<h5>一、单选题</h5>
				<div>
					<ul class="list" v-for="(problem, i) in problems">
						<label class="quiz-content" :id="i+1">
							题目{{i+1}}：
						</label>{{problem.title}}({{problem.degree}}分)
						<br>
						<br>
						<div class="answers">
							<input class="radio" type="radio" value="A"  :name="i+1" > {{problem.options1}}<br/>
							<input class="radio" type="radio" value="B"  :name="i+1" > {{problem.options2}}<br/>
							<input class="radio" type="radio" value="C"  :name="i+1" > {{problem.options3}}<br/>
							<input class="radio" type="radio" value="D"  :name="i+1" > {{problem.options4}}
						</div>				
					</ul>
				</div>
				<input type="button" name="" id="" value="保存" />
				<input type="button" name="" id="" value="提交"  @click = "tijiao()" />
			</div>
		</div>
		<script src="../js/vue.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/qs.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/axios.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			var oUl = document.getElementsByTagName("ul")[0];
			var str = "";
			var total;
			var title;
			var w_name;
			var degree;
			let vm = new Vue({
				el:"#right",
				data:{
					problems:[],
					totalsorce: 0,
				},
				mounted() {
					title = decodeURI(location.search);
					if( title == "" || title.indexOf("?") != 0 ){//说明请求地址数据有问题返回首页
						location.href = "word.html";
						return;
					}
					title = title.replace("?", "").split("&");
					w_name = title[0];
					degree = title[1];
					$('#ename').text(w_name + "（总分" + degree + "分）");
					axios.post("../class/findpro1", qs.stringify({w_name:w_name})).then(result=>{
						if(result.status == 200 && result.data.code == 200){
							total = result.data.data.total;
							this.problems = result.data.data.data;
							for(var i=1;i<=total;i++){
								str+="<li><a href=#"+ i +">第"+ i +"题</a></li>"
							}
							oUl.innerHTML = str;
						}
					})
				},
				methods:{
					tijiao(){
						for(var i=1;i<=total;i++){
							var radio1Value=$(":radio[name="+i+"]:checked").val();
							if(radio1Value==null){
								var r=confirm("您还有未填项，是否提交！！!");
								if(r == true){
									break;
								}else{
									return;
								}
							}
						}
						for (var i=1;i<=total;i++){
							var radio1Value=$(":radio[name="+i+"]:checked").val();
							if(radio1Value == this.problems[i-1].answer){
								this.totalsorce += this.problems[i-1].degree;
							}
						}
						axios.post("../class/getworddegree", qs.stringify({w_name : w_name,degree : this.totalsorce})).then(result=>{
							if(result.status == 200 && result.data.code == 200){
								alert("提交成功！！！");
							}else{
								alert("提交失败！！！");
							}
							window.location.href="about:blank";
							window.close();
						})
					}
				}
			})
			
			
		</script>
	</body>
</html>
