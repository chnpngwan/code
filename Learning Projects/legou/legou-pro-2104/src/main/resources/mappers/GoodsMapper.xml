<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zpark.legou.goods.GoodsMapper">

    <resultMap id="baseGoods" type="com.zpark.legou.goods.Goods">
        <id property="gid" column="goods_gid"/>
        <result property="url" column="good_url"/>
        <result property="price" column="goods_price"/>
        <result property="title" column="goods_title"/>
        <result property="stock" column="goods_stock"/>
        <result property="type" column="goods_type"/>
        <result property="status" column="goods_status" typeHandler="org.apache.ibatis.type.EnumOrdinalTypeHandler"/>
        <result property="updateTime" column="goods_update_time"/>
    </resultMap>


    <insert id="insertGoods"
            parameterType="com.zpark.legou.goods.Goods"
            useGeneratedKeys="true"
            keyColumn="goods_gid"
            keyProperty="gid">
        INSERT INTO goods(goods_gid,
                          good_url,
                          goods_price,
                          goods_title,
                          goods_stock,
                          goods_type,
                          goods_status,
                          goods_update_time)
        value (null, #{url}, #{price}, #{title}, #{stock}, #{type}, #{status,typeHandler=org.apache.ibatis.type.EnumOrdinalTypeHandler}, NOW())
    </insert>

    <update id="updateStatusDown" parameterType="list">
        update goods
        set goods_status = 0
        where goods_gid in
        <foreach collection="goodsId" item="gid" separator="," open="(" close=")">
            #{gid}
        </foreach>
    </update>

    <update id="updateStatusUp">
        update goods
        set goods_status = 1,
            goods_update_time = NOW()
        where goods_gid in
        <foreach collection="goodsId" item="gid" separator="," open="(" close=")">
            #{gid}
        </foreach>
    </update>

</mapper>